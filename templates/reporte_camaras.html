{% extends 'base_sidebar.html' %}
{% load static %}

{% block title %}Reporte C√°maras{% endblock %}
{% block page_title %}Reporte de C√°maras - Control Total{% endblock %}
{% block page_subtitle %}Monitoreo diario de c√°maras de vigilancia{% endblock %}

{% block extra_styles %}
<style>
    .reporte-card { background: white; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); overflow: hidden; max-width: 900px; margin: 0 auto; }
    .reporte-header-cam { background: linear-gradient(135deg, #17a2b8 0%, #138496 100%); color: white; padding: 25px; text-align: center; }
    .reporte-header-cam h2 { font-size: 1.5em; margin: 0 0 8px 0; }
    .reporte-header-cam p { opacity: 0.9; margin: 0; }
    .reporte-info { padding: 20px; background: #f8f9fa; border-bottom: 2px solid #e9ecef; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; }
    .info-item { display: flex; flex-direction: column; gap: 8px; }
    .info-label { font-weight: 600; color: #495057; font-size: 0.9em; }
    .info-value input, .info-value select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 1em; }
    .turno-horario { font-size: 0.85em; color: #6c757d; margin-top: 5px; }
    .centros-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; padding: 25px; }
    .centro-card { background: #f8f9fa; border-radius: 12px; padding: 20px; border: 1px solid #e0e0e0; transition: all 0.3s; }
    .centro-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    .centro-header { display: flex; align-items: center; gap: 12px; margin-bottom: 15px; padding-bottom: 12px; border-bottom: 2px solid #17a2b8; }
    .centro-icon { font-size: 1.5em; }
    .centro-nombre { font-weight: 700; color: #1e3a5f; font-size: 1.1em; }
    .centro-status { display: flex; flex-direction: column; gap: 10px; }
    .status-option { display: flex; align-items: flex-start; gap: 10px; padding: 10px; background: white; border-radius: 8px; cursor: pointer; transition: all 0.3s; }
    .status-option:hover { background: #e9ecef; }
    .status-option input[type="radio"] { margin-top: 3px; }
    .status-option label { cursor: pointer; font-size: 0.9em; line-height: 1.4; }
    .incidencia-input { display: none; margin-top: 10px; }
    .incidencia-input.active { display: block; }
    .incidencia-input textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; min-height: 100px; font-family: inherit; resize: none; overflow: hidden; }
    .acciones-footer { display: flex; gap: 15px; padding: 25px; border-top: 2px solid #e9ecef; flex-wrap: wrap; justify-content: center; }
    .btn-accion { padding: 14px 28px; border: none; border-radius: 10px; font-size: 1em; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: all 0.3s; }
    .btn-guardar { background: linear-gradient(135deg, #28a745, #218838); color: white; }
    .btn-guardar:hover { box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4); transform: translateY(-2px); }
    .btn-captura { background: linear-gradient(135deg, #6f42c1, #5a32a3); color: white; }
    .btn-captura:hover { box-shadow: 0 4px 15px rgba(111, 66, 193, 0.4); transform: translateY(-2px); }
    .btn-pdf { background: linear-gradient(135deg, #dc3545, #c82333); color: white; }
    .btn-pdf:hover { box-shadow: 0 4px 15px rgba(220, 53, 69, 0.4); transform: translateY(-2px); }
    #alerta-container { position: fixed; top: 100px; right: 20px; z-index: 9999; }
    .alerta { padding: 15px 25px; border-radius: 8px; margin-bottom: 10px; font-weight: 600; animation: slideIn 0.3s ease; }
    .alerta-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
    .alerta-error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    @keyframes slideIn { from { transform: translateX(100px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
</style>
{% endblock %}

{% block header_actions %}
<a href="{% url 'consulta_reportes_camaras' %}" class="header-btn">
    <i class="fas fa-list"></i> Ver Reportes
</a>
{% endblock %}

{% block content %}
<div id="alerta-container"></div>

<div class="reporte-card" id="reporte-contenido">
    <div class="reporte-header-cam">
        <h2>üìπ Reporte Diario - Control de C√°maras</h2>
        <p>R√≠o Pescado - Coll√≠n - Lican - Traf√∫n</p>
    </div>
    
    <div class="reporte-info">
        <div class="info-item">
            <span class="info-label">Fecha</span>
            <div class="info-value">
                <input type="date" id="fecha" value="{{ fecha_actual|date:'Y-m-d' }}">
            </div>
        </div>
        <div class="info-item">
            <span class="info-label">Turno</span>
            <div class="info-value">
                <select id="turno">
                    <option value="Ma√±ana">Ma√±ana</option>
                    <option value="Tarde" selected>Tarde</option>
                    <option value="Noche">Noche</option>
                </select>
                <div class="turno-horario" id="turno-horario">Horario: 14:30 - 00:00</div>
            </div>
        </div>
        <div class="info-item">
            <span class="info-label">Responsable</span>
            <div class="info-value">
                <input type="text" id="responsable" placeholder="Nombre del responsable">
            </div>
        </div>
    </div>
    
    <div class="centros-grid">
        <div class="centro-card">
            <div class="centro-header">
                <span class="centro-icon">üè¢</span>
                <span class="centro-nombre">R√≠o Pescado</span>
            </div>
            <div class="centro-status">
                <div class="status-option">
                    <input type="radio" name="rio_pescado_status" id="rio_pescado_ok" value="sin_incidencias" checked>
                    <label for="rio_pescado_ok">‚úì No se detectaron novedades</label>
                </div>
                <div class="status-option">
                    <input type="radio" name="rio_pescado_status" id="rio_pescado_incidencia" value="con_incidencias">
                    <label for="rio_pescado_incidencia">‚ö† Se detectaron novedades</label>
                </div>
                <div class="incidencia-input" id="rio_pescado_input">
                    <textarea placeholder="Describe las novedades..."></textarea>
                </div>
            </div>
        </div>
        
        <div class="centro-card">
            <div class="centro-header">
                <span class="centro-icon">üè¢</span>
                <span class="centro-nombre">Coll√≠n</span>
            </div>
            <div class="centro-status">
                <div class="status-option">
                    <input type="radio" name="collin_status" id="collin_ok" value="sin_incidencias" checked>
                    <label for="collin_ok">‚úì No se detectaron novedades</label>
                </div>
                <div class="status-option">
                    <input type="radio" name="collin_status" id="collin_incidencia" value="con_incidencias">
                    <label for="collin_incidencia">‚ö† Se detectaron novedades</label>
                </div>
                <div class="incidencia-input" id="collin_input">
                    <textarea placeholder="Describe las novedades..."></textarea>
                </div>
            </div>
        </div>
        
        <div class="centro-card">
            <div class="centro-header">
                <span class="centro-icon">üè¢</span>
                <span class="centro-nombre">Lican</span>
            </div>
            <div class="centro-status">
                <div class="status-option">
                    <input type="radio" name="lican_status" id="lican_ok" value="sin_incidencias" checked>
                    <label for="lican_ok">‚úì No se detectaron novedades</label>
                </div>
                <div class="status-option">
                    <input type="radio" name="lican_status" id="lican_incidencia" value="con_incidencias">
                    <label for="lican_incidencia">‚ö† Se detectaron novedades</label>
                </div>
                <div class="incidencia-input" id="lican_input">
                    <textarea placeholder="Describe las novedades..."></textarea>
                </div>
            </div>
        </div>
        
        <div class="centro-card">
            <div class="centro-header">
                <span class="centro-icon">üè¢</span>
                <span class="centro-nombre">Traf√∫n</span>
            </div>
            <div class="centro-status">
                <div class="status-option">
                    <input type="radio" name="trafun_status" id="trafun_ok" value="sin_incidencias" checked>
                    <label for="trafun_ok">‚úì No se detectaron novedades</label>
                </div>
                <div class="status-option">
                    <input type="radio" name="trafun_status" id="trafun_incidencia" value="con_incidencias">
                    <label for="trafun_incidencia">‚ö† Se detectaron novedades</label>
                </div>
                <div class="incidencia-input" id="trafun_input">
                    <textarea placeholder="Describe las novedades..."></textarea>
                </div>
            </div>
        </div>
    </div>
    
    <div class="acciones-footer">
        <button class="btn-accion btn-guardar" id="btnGuardar">
            <span>üíæ</span> Guardar Reporte
        </button>
        <button class="btn-accion btn-captura" id="btnCaptura">
            <span>üì∏</span> Generar Captura
        </button>
        <button class="btn-accion btn-pdf" id="btnPDF">
            <span>üìÑ</span> Exportar PDF
        </button>
    </div>
</div>

{% csrf_token %}
{% endblock %}

{% block extra_scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="{% static 'js/reporte_camaras.js' %}"></script>
{% endblock %}
